        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>OperationRegistry class / nuxeo_automation Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="nuxeo_automation" data-type="OperationRegistry">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../nuxeo_automation.html">nuxeo_automation</a> &rsaquo; <a href="../nuxeo_automation/OperationRegistry.html">OperationRegistry</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>OperationRegistry</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p><a class="crossref" href="../nuxeo_automation/OperationRegistry.html">OperationRegistry</a> retrieves and caches the available operations per server <a class="crossref" href="../dart_core/Uri.html">Uri</a>.</p>
<pre class="source">
class OperationRegistry {
 Map&lt;String, String&gt; paths;
 Map&lt;String, Operation&gt; ops;
 Map&lt;String, Operation&gt; chains;

 static Map&lt;Uri, OperationRegistry&gt; _registries = new Map&lt;Uri, OperationRegistry&gt;();

 static Future&lt;OperationRegistry&gt; get(Uri uri, [http.Client client]) {
   if (_registries.containsKey(uri)) {
     return new Future.value(_registries[uri]);
   } else {
     var request = client.get(uri)..headers.set("Accept", CTYPE_AUTOMATION);
     return request.send()
         .then((http.Response response) {
           var body = response.body,
               json = JSON.parse(body);
           _registries[uri] = new OperationRegistry.fromJSON(json);
           return _registries[uri];
         })
         .catchError((e) {
           throw new AutomationException(e.toString());
         });
   }
 }

 OperationRegistry._internal(this.paths, this.ops, this.chains);

 factory OperationRegistry.fromJSON(Map&lt;String, Object&gt; json) {

   var paths = json["paths"];

   var ops = {};
   (json["operations"] as List).forEach((json) {
     var op = new Operation.fromJSON(json);
     ops[op.id] = op;
   });

   var chains = {};

   return new OperationRegistry._internal(paths, ops, chains);
 }

 getPath(String key) =&gt; paths[key];

 /// Get an [Operation] with the given id.
 Operation operator[](String key) =&gt; ops.containsKey(key) ? ops[key] : chains[key];
}
</pre>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="get">
<button class="show-code">Code</button>
Future&lt;<a href="../nuxeo_automation/OperationRegistry.html">OperationRegistry</a>&gt; <strong>get</strong>(Uri uri, [<a href="../http_client/Client.html">Client</a> client]) <a class="anchor-link" href="#get"
              title="Permalink to OperationRegistry.get">#</a></h4>
<div class="doc">
<pre class="source">
static Future&lt;OperationRegistry&gt; get(Uri uri, [http.Client client]) {
 if (_registries.containsKey(uri)) {
   return new Future.value(_registries[uri]);
 } else {
   var request = client.get(uri)..headers.set("Accept", CTYPE_AUTOMATION);
   return request.send()
       .then((http.Response response) {
         var body = response.body,
             json = JSON.parse(body);
         _registries[uri] = new OperationRegistry.fromJSON(json);
         return _registries[uri];
       })
       .catchError((e) {
         throw new AutomationException(e.toString());
       });
 }
}
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="fromJSON">
<button class="show-code">Code</button>
factory <strong>OperationRegistry.fromJSON</strong>(Map&lt;String, Object&gt; json) <a class="anchor-link" href="#fromJSON"
              title="Permalink to OperationRegistry.OperationRegistry.fromJSON">#</a></h4>
<div class="doc">
<pre class="source">
factory OperationRegistry.fromJSON(Map&lt;String, Object&gt; json) {

 var paths = json["paths"];

 var ops = {};
 (json["operations"] as List).forEach((json) {
   var op = new Operation.fromJSON(json);
   ops[op.id] = op;
 });

 var chains = {};

 return new OperationRegistry._internal(paths, ops, chains);
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="chains">
<button class="show-code">Code</button>
Map&lt;String, <a href="../nuxeo_automation/Operation.html">Operation</a>&gt;         <strong>chains</strong> <a class="anchor-link"
            href="#chains"
            title="Permalink to OperationRegistry.chains">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Map&lt;String, Operation&gt; chains
</pre>
</div>
</div>
<div class="field"><h4 id="ops">
<button class="show-code">Code</button>
Map&lt;String, <a href="../nuxeo_automation/Operation.html">Operation</a>&gt;         <strong>ops</strong> <a class="anchor-link"
            href="#ops"
            title="Permalink to OperationRegistry.ops">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Map&lt;String, Operation&gt; ops
</pre>
</div>
</div>
<div class="field"><h4 id="paths">
<button class="show-code">Code</button>
Map&lt;String, String&gt;         <strong>paths</strong> <a class="anchor-link"
            href="#paths"
            title="Permalink to OperationRegistry.paths">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Map&lt;String, String&gt; paths
</pre>
</div>
</div>
</div>
<div>
<h3>Operators</h3>
<div class="method"><h4 id="[]">
<button class="show-code">Code</button>
<a href="../nuxeo_automation/Operation.html">Operation</a> <strong>operator []</strong>(String key) <a class="anchor-link" href="#[]"
              title="Permalink to OperationRegistry.operator []">#</a></h4>
<div class="doc">
<p>Get an <a class="crossref" href="../nuxeo_automation/Operation.html">Operation</a> with the given id.</p>
<pre class="source">
Operation operator[](String key) =&gt; ops.containsKey(key) ? ops[key] : chains[key];
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getPath">
<button class="show-code">Code</button>
dynamic <strong>getPath</strong>(String key) <a class="anchor-link" href="#getPath"
              title="Permalink to OperationRegistry.getPath">#</a></h4>
<div class="doc">
<pre class="source">
getPath(String key) =&gt; paths[key];
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
